- config:
    name: "解决乱码问题"
    base_url: https://www.baidu.com/
    variables:
      - headers:
          Accept: text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01
          Accept-Encoding: gzip, deflate, br
          Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
          User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.162 Safari/537.36
          X-Requested-With: XMLHttpRequest
      - text: "是的发是的发送啊实打实大师大到"
      - expected_results: ${TranscodingIso8859_1($text)}

    output:
      - actual_results
      - expected_results
- test:
    name: "baidu搜索请求"
    request:
      url: s?
      method: GET
      headers:
          Accept: text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01
          Accept-Encoding: gzip, deflate, br
          Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
          User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.162 Safari/537.36
          X-Requested-With: XMLHttpRequest
      params:
        wd: "是的发是的发送啊实打实大师大到"
    extract:
      -  actual_results: <title>(.+?)</title>
    validate:
        - eq: [status_code,200]
        - eq: [$actual_results,$expected_results]
